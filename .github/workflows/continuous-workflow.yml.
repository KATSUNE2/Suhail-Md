name: Continuous Workflow

on:
  workflow_dispatch:
  schedule:
    - cron: '*/5 * * * *'  

jobs:
  run-continuously:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Run a long-running task
        run: |
          echo "Running task..."
          sleep 300  # Simulates a task running for 5 minutes

      - name: Trigger next run
        if: always()
        run: |
          curl -X POST \
          -H "Accept: application/vnd.github.v3+json" \
          -H "Authorization: token ${{ secrets.GH_TOKEN }}" \
          https://api.github.com/repos/${{ github.repository }}/actions/workflows/${{ github.workflow }}/dispatches \
          -d '{"ref":"main"}'
